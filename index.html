<html class="scroll-smooth" lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <title>Physique 57 India â€“ Annual Performance Appraisal Form</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;700&family=Roboto&display=swap"
    rel="stylesheet"
  />
  <link
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    rel="stylesheet"
  />
  <style>
    body {
      font-family: "Roboto", sans-serif;
      background-color: #f9fafb;
      color: #1f2937;
      margin: 0;
      padding-bottom: 6rem;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }
    h1,
    h2,
    h3,
    h4 {
      font-family: "Montserrat", sans-serif;
      color: #111827;
    }
    table {
      border-collapse: separate;
      border-spacing: 0;
      border-radius: 0.5rem;
      overflow: hidden;
      box-shadow: 0 1px 3px rgb(0 0 0 / 0.1);
      background: white;
      width: 100%;
      margin-bottom: 2rem;
    }
    thead tr {
      background: linear-gradient(90deg, #4f46e5, #4338ca);
      color: #e0e7ff;
      font-weight: 700;
      font-size: 0.95rem;
      user-select: none;
    }
    th {
      padding: 0.75rem 1rem;
      text-align: left;
      border-bottom: 2px solid #4338ca;
    }
    td {
      padding: 0.75rem 1rem;
      vertical-align: top;
      border-bottom: 1px solid #e5e7eb;
      font-weight: 500;
      font-size: 0.95rem;
      color: #374151;
    }
    label {
      font-weight: 600;
      color: #4338ca;
      display: block;
      margin-bottom: 0.25rem;
    }
    input[type="text"],
    input[type="email"],
    input[type="date"],
    select,
    textarea {
      font-family: inherit;
      font-size: 1rem;
      border-radius: 0.375rem;
      border: 1.5px solid #d1d5db;
      padding: 0.5rem 0.75rem;
      color: #374151;
      background-color: #fff;
      transition: border-color 0.2s ease, box-shadow 0.2s ease;
      width: 100%;
      box-sizing: border-box;
      resize: vertical;
      box-shadow: inset 0 1px 2px rgb(0 0 0 / 0.05);
      min-height: 2.5rem;
    }
    input[type="text"]:focus,
    input[type="email"]:focus,
    input[type="date"]:focus,
    select:focus,
    textarea:focus {
      border-color: #4f46e5;
      box-shadow: 0 0 0 3px rgb(147 197 253 / 0.5);
      outline: none;
      background-color: #eef2ff;
    }
    input[readonly] {
      background-color: #f9fafb;
      cursor: not-allowed;
      color: #6b7280;
    }
    .rating-input {
      width: 4.5rem !important;
      height: 2.75rem;
      font-size: 1.15rem;
      font-weight: 700;
      text-align: center;
      border-radius: 0.375rem;
      border: 1.5px solid #d1d5db;
      background-color: #f9fafb;
      color: #4338ca;
      box-shadow: inset 0 1px 2px rgb(0 0 0 / 0.05);
      transition: border-color 0.2s ease;
      -moz-appearance: textfield;
    }
    .rating-input::-webkit-inner-spin-button,
    .rating-input::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    .rating-input:focus {
      border-color: #4f46e5;
      background-color: #e0e7ff;
      box-shadow: 0 0 0 3px rgb(147 197 253 / 0.5) inset;
      outline: none;
    }
    .rich-textarea-container {
      display: flex;
      flex-direction: column;
      border: 1.5px solid #d1d5db;
      border-radius: 0.375rem;
      background: white;
      box-shadow: inset 0 1px 3px rgb(0 0 0 / 0.05);
      transition: border-color 0.3s ease, box-shadow 0.3s ease;
      min-height: 2.75rem;
      max-height: 120px;
      overflow: hidden;
    }
    .rich-textarea-container:focus-within {
      border-color: #4f46e5;
      box-shadow: 0 0 0 3px rgb(147 197 253 / 0.5);
    }
    .toolbar {
      display: flex;
      gap: 0.4rem;
      background: #eef2ff;
      border-bottom: 1px solid #c7d2fe;
      padding: 0.15rem 0.5rem;
      user-select: none;
      border-top-left-radius: 0.375rem;
      border-top-right-radius: 0.375rem;
    }
    .toolbar button {
      background: transparent;
      border: none;
      cursor: pointer;
      color: #4f46e5;
      font-size: 1.1rem;
      padding: 0.15rem 0.4rem;
      border-radius: 0.375rem;
      transition: background-color 0.2s ease, color 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
    }
    .toolbar button:hover,
    .toolbar button:focus {
      background-color: #c7d2fe;
      color: #3730a3;
      outline: none;
    }
    .rich-textarea {
      flex-grow: 1;
      padding: 0.5rem 0.75rem;
      font-family: inherit;
      font-size: 1rem;
      color: #374151;
      background-color: white;
      overflow-y: auto;
      outline-offset: 2px;
      white-space: pre-wrap;
      word-break: break-word;
      font-weight: 500;
      line-height: 1.5;
      border: none;
      resize: none;
      min-height: 2.75rem;
      max-height: 100px;
    }
    .rich-textarea::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    .rich-textarea::-webkit-scrollbar-track {
      background: #e5e7eb;
      border-radius: 0.375rem;
    }
    .rich-textarea::-webkit-scrollbar-thumb {
      background-color: #a5b4fc;
      border-radius: 0.375rem;
      border: 2px solid #e5e7eb;
    }
    #exportButtons {
      position: fixed;
      bottom: 1rem;
      left: 50%;
      transform: translateX(-50%);
      background: white;
      border-radius: 0.5rem;
      box-shadow: 0 8px 20px rgb(0 0 0 / 0.15);
      padding: 0.5rem 1.5rem;
      display: flex;
      gap: 1.25rem;
      z-index: 1100;
      font-weight: 700;
      font-family: "Montserrat", sans-serif;
      font-size: 0.9rem;
    }
    #exportButtons button {
      background: #4f46e5;
      color: white;
      border: none;
      padding: 0.4rem 1rem;
      border-radius: 0.375rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.9rem;
      transition: background-color 0.3s ease;
      box-shadow: 0 3px 6px rgb(79 70 229 / 0.4);
      user-select: none;
    }
    #exportButtons button:hover,
    #exportButtons button:focus {
      background: #3730a3;
      outline: none;
    }
    #exportContent {
      max-width: 900px;
      margin: 0 auto 6rem;
      background: white;
      padding: 3rem 3rem 4rem;
      border-radius: 1rem;
      border: 2px solid #c7d2fe;
      box-shadow: 0 4px 20px rgb(79 70 229 / 0.15);
      font-family: "Roboto", sans-serif;
      color: #1f2937;
      page-break-inside: avoid;
      box-sizing: border-box;
    }
    #exportContent h1,
    #exportContent h2,
    #exportContent h3,
    #exportContent h4 {
      font-family: "Montserrat", sans-serif;
      color: #4338ca;
      margin-top: 2rem;
      margin-bottom: 1rem;
      page-break-after: avoid;
    }
    #exportContent h1 {
      font-size: 2.5rem;
      font-weight: 700;
      letter-spacing: 0.02em;
    }
    #exportContent h2 {
      font-size: 1.75rem;
      font-weight: 600;
      border-bottom: 2px solid #a5b4fc;
      padding-bottom: 0.3rem;
    }
    #exportContent table {
      border-collapse: separate;
      width: 100%;
      margin-bottom: 2rem;
      border-radius: 0.5rem;
      overflow: hidden;
      box-shadow: 0 0 15px rgb(79 70 229 / 0.1);
      page-break-inside: avoid;
    }
    #exportContent th,
    #exportContent td {
      border: 1px solid #e0e7ff;
      padding: 0.85rem 1.25rem;
      vertical-align: top;
      font-size: 1rem;
      font-weight: 600;
      color: #4338ca;
    }
    #exportContent th {
      background: #4f46e5;
      color: #e0e7ff;
      font-weight: 700;
      text-align: left;
    }
    #exportContent td {
      font-weight: 500;
      color: #374151;
    }
    #exportContent .signature-block {
      margin-top: 3rem;
      display: flex;
      justify-content: space-between;
      gap: 2rem;
      font-style: italic;
      font-size: 1rem;
      color: #4338ca;
      page-break-inside: avoid;
    }
    #exportContent .signature-block > div {
      flex: 1;
      border-top: 3px solid #4f46e5;
      padding-top: 0.75rem;
      text-align: center;
    }
    .warning-message {
      color: #b91c1c;
      font-weight: 600;
      margin-top: 0.5rem;
      font-size: 0.9rem;
    }
    @media print {
      #exportButtons {
        display: none !important;
      }
      #exportContent {
        border: none !important;
        box-shadow: none !important;
        padding: 0 !important;
        max-width: 100% !important;
        border-radius: 0 !important;
      }
    }
  </style>
</head>
<body>
  <main aria-label="Annual Performance Appraisal Form" id="exportContent" role="main">
    <div class="flex justify-end mb-8">
      <img
        alt="Employee photo placeholder, professional headshot with neutral background"
        class="rounded-md w-20 h-20 object-cover border border-gray-300 shadow-sm"
        height="80"
        id="employeePhoto"
        src="https://i.imgur.com/9mOm7gP.png"
        width="80"
      />
    </div>
    <header class="mb-12 text-center">
      <h1 class="text-4xl font-extrabold tracking-tight leading-tight">
        Annual Performance Review
      </h1>
      <p class="text-lg font-semibold text-indigo-700 mt-1 tracking-wide">
        Team Sales and Client Servicing
      </p>
    </header>
    <!-- Section 1: Employee Information -->
    <section aria-labelledby="employee-info" class="mb-12">
      <h2
        class="text-2xl font-semibold mb-6 flex items-center justify-between border-b border-indigo-300 pb-2"
        id="employee-info"
      >
        Section 1: Employee Information
      </h2>
      <form autocomplete="off" class="grid grid-cols-1 sm:grid-cols-2 gap-6" id="appraisalForm" novalidate>
        <div>
          <label class="block mb-1 font-semibold text-indigo-700" for="employeeName">
            Employee Name
          </label>
          <select
            class="w-full rounded-lg border border-indigo-300 bg-white px-4 py-2 text-indigo-900 shadow-sm focus:ring-2 focus:ring-indigo-400 focus:border-indigo-500"
            id="employeeName"
            name="employeeName"
            required
          >
            <option disabled selected value=""></option>
          </select>
          <p class="mt-1 text-xs text-indigo-500">
            Select an employee to auto-populate details.
          </p>
        </div>
        <div>
          <label class="block mb-1 font-semibold text-indigo-700" for="designation">Designation</label>
          <input
            aria-readonly="true"
            class="w-full rounded-lg border border-indigo-200 bg-indigo-50 px-4 py-2 text-indigo-900 cursor-not-allowed"
            id="designation"
            name="designation"
            readonly
            type="text"
          />
        </div>
        <div>
          <label class="block mb-1 font-semibold text-indigo-700" for="department">Department</label>
          <input
            aria-readonly="true"
            class="w-full rounded-lg border border-indigo-200 bg-indigo-50 px-4 py-2 text-indigo-900 cursor-not-allowed"
            id="department"
            name="department"
            readonly
            type="text"
          />
        </div>
        <div>
          <label class="block mb-1 font-semibold text-indigo-700" for="employeeID">Employee ID</label>
          <input
            aria-readonly="true"
            class="w-full rounded-lg border border-indigo-200 bg-indigo-50 px-4 py-2 text-indigo-900 cursor-not-allowed"
            id="employeeID"
            name="employeeID"
            readonly
            type="text"
          />
        </div>
        <div>
          <label class="block mb-1 font-semibold text-indigo-700" for="email">Email</label>
          <input
            aria-readonly="true"
            class="w-full rounded-lg border border-indigo-200 bg-indigo-50 px-4 py-2 text-indigo-900 cursor-not-allowed"
            id="email"
            name="email"
            readonly
            type="email"
          />
        </div>
        <div>
          <label class="block mb-1 font-semibold text-indigo-700" for="employmentType">Employment Type</label>
          <input
            aria-readonly="true"
            class="w-full rounded-lg border border-indigo-200 bg-indigo-50 px-4 py-2 text-indigo-900 cursor-not-allowed"
            id="employmentType"
            name="employmentType"
            readonly
            type="text"
          />
        </div>
        <div>
          <label class="block mb-1 font-semibold text-indigo-700" for="employeeStatus">Employee Status</label>
          <input
            aria-readonly="true"
            class="w-full rounded-lg border border-indigo-200 bg-indigo-50 px-4 py-2 text-indigo-900 cursor-not-allowed"
            id="employeeStatus"
            name="employeeStatus"
            readonly
            type="text"
          />
        </div>
        <div>
          <label class="block mb-1 font-semibold text-indigo-700" for="sourceOfHire">Source of Hire</label>
          <input
            aria-readonly="true"
            class="w-full rounded-lg border border-indigo-200 bg-indigo-50 px-4 py-2 text-indigo-900 cursor-not-allowed"
            id="sourceOfHire"
            name="sourceOfHire"
            readonly
            type="text"
          />
        </div>
        <div>
          <label class="block mb-1 font-semibold text-indigo-700" for="dateOfJoining">Date of Joining</label>
          <input
            aria-readonly="true"
            class="w-full rounded-lg border border-indigo-200 bg-indigo-50 px-4 py-2 text-indigo-900 cursor-not-allowed"
            id="dateOfJoining"
            name="dateOfJoining"
            readonly
            type="date"
          />
        </div>
        <div>
          <label class="block mb-1 font-semibold text-indigo-700" for="reportingManager">Reporting Manager</label>
          <input
            aria-readonly="true"
            class="w-full rounded-lg border border-indigo-200 bg-indigo-50 px-4 py-2 text-indigo-900 cursor-not-allowed"
            id="reportingManager"
            name="reportingManager"
            readonly
            type="text"
          />
        </div>
        <div class="sm:col-span-2 text-center mt-6">
          <button
            class="inline-flex items-center gap-2 px-6 py-2 border border-indigo-600 text-indigo-600 font-semibold rounded-lg hover:bg-indigo-50 focus:outline-none focus:ring-2 focus:ring-indigo-400 transition"
            type="reset"
            id="resetFormBtn"
          >
            <i class="fa-solid fa-rotate-left"></i> Reset Form
          </button>
        </div>
      </form>
    </section>
    <!-- Section 2: Self-Assessment by Employee -->
    <section aria-labelledby="section2" class="mb-14">
      <h2 class="text-3xl font-semibold mb-6 border-b border-gray-300 pb-2" id="section2">
        Section 2: Self-Assessment by Employee
      </h2>
      <p class="mb-2 font-semibold text-indigo-900">
        Please rate your own performance and provide honest reflections. Use the scale below:
      </p>
      <p class="mb-6 text-sm italic text-indigo-500">
        1 = Needs Improvement | 2 = Fair | 3 = Meets Expectations | 4 = Exceeds Expectations | 5 = Exceptional
      </p>
      <div class="overflow-x-auto rounded-md shadow-sm border border-gray-300 bg-white">
        <table>
          <thead>
            <tr>
              <th class="w-2/5">Competency</th>
              <th class="w-1/6 text-center">Rating</th>
              <th class="w-7/12">Comment/Example</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Communication &amp; Brand Language (tone, clarity, empathy)</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Communication &amp; Articulation"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="self_communication"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="self_communication_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Sales Effectiveness (conversion, upsell/cross-sell, target achievement)</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Sales Effectiveness"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="self_sales"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="self_sales_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Product Knowledge (offerings, pricing, benefits)</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Product Knowledge"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="self_product"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="self_product_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Client Servicing (building rapport,positive feedback, retention)</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Client Relationship Management"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="self_client_rel"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="self_client_rel_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>CRM &amp; Tech Adoption (Momence, Yellow Messenger, Zoho, WhatsApp tools)</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for CRM &amp; Tech Adoption"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="self_crm"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="self_crm_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Time Management &amp; Responsiveness</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Time Management &amp; Responsiveness"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="self_time"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="self_time_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Problem-Solving &amp; Crisis Handling</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Problem-Solving &amp; Crisis Handling"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="self_problem"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="self_problem_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Initiative &amp; Accountability</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Initiative &amp; Accountability"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="self_initiative"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="self_initiative_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Collaboration with Trainers/Ops & Additional Tasks</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Collaboration with Front Desk/Trainers/Ops"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="self_collaboration"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="self_collaboration_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td class="font-semibold text-right" colspan="2">Total Score (out of 45):</td>
              <td>
                <input
                  class="border border-gray-300 rounded-md p-2 w-24 text-center"
                  max="45"
                  min="0"
                  name="self_total_score"
                  placeholder="0"
                  readonly
                  type="number"
                />
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <h3 class="text-xl font-semibold mt-10 mb-4 text-indigo-700">Reflections by Employee</h3>
      <form>
        <div class="space-y-6 max-w-3xl mx-auto">
          <div>
            <label class="block font-semibold mb-1" for="achievement">
              1. What achievements this year are you most proud of?
            </label>
            <textarea
              class="border border-gray-300 rounded-md p-2 w-full resize-y"
              id="achievement"
              name="achievement"
              rows="5"
            ></textarea>
          </div>
          <div>
            <label class="block font-semibold mb-1" for="success_story">
              2. Which client interaction stood out to you as a success story? Why?
            </label>
            <textarea
              class="border border-gray-300 rounded-md p-2 w-full resize-y"
              id="success_story"
              name="success_story"
              rows="5"
            ></textarea>
          </div>
          <div>
            <label class="block font-semibold mb-1" for="challenges">
              3. What challenges did you face in this review period? How did you deal with them?
            </label>
            <textarea
              class="border border-gray-300 rounded-md p-2 w-full resize-y"
              id="challenges"
              name="challenges"
              rows="5"
            ></textarea>
          </div>
          <div>
            <label class="block font-semibold mb-1" for="brand_fit">
              4. What do you think makes you a strong fit for Physique 57â€™s brand and experience?
            </label>
            <textarea
              class="border border-gray-300 rounded-md p-2 w-full resize-y"
              id="brand_fit"
              name="brand_fit"
              rows="5"
            ></textarea>
          </div>
          <div>
            <label class="block font-semibold mb-1" for="support_areas">
              5. What areas would you like more support, training, or mentorship in?
            </label>
            <textarea
              class="border border-gray-300 rounded-md p-2 w-full resize-y"
              id="support_areas"
              name="support_areas"
              rows="5"
            ></textarea>
          </div>
        </div>
        <h4 class="text-lg font-semibold mt-10 mb-4 text-indigo-700">
          6. What are 3 specific, measurable goals youâ€™d like to set for the upcoming year?
        </h4>
        <div class="overflow-x-auto max-w-3xl mx-auto">
          <table class="w-full border-collapse rounded-md border border-gray-300">
            <thead>
              <tr class="bg-indigo-600 text-white">
                <th class="p-3 w-24">Goal</th>
                <th class="p-3">Description &amp; Metrics</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="p-2 font-semibold">Goal 1</td>
                <td class="p-2">
                  <textarea
                    class="border border-gray-300 rounded-md p-2 w-full resize-y"
                    name="goal1_desc"
                    rows="2"
                  ></textarea>
                </td>
              </tr>
              <tr>
                <td class="p-2 font-semibold">Goal 2</td>
                <td class="p-2">
                  <textarea
                    class="border border-gray-300 rounded-md p-2 w-full resize-y"
                    name="goal2_desc"
                    rows="2"
                  ></textarea>
                </td>
              </tr>
              <tr>
                <td class="p-2 font-semibold">Goal 3</td>
                <td class="p-2">
                  <textarea
                    class="border border-gray-300 rounded-md p-2 w-full resize-y"
                    name="goal3_desc"
                    rows="2"
                  ></textarea>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="mt-8 flex flex-col sm:flex-row sm:space-x-12 space-y-6 sm:space-y-0 max-w-3xl mx-auto">
          <div class="flex-1">
            <label class="block font-semibold mb-1" for="employee_signature">Employee Signature:</label>
            <input
              autocomplete="off"
              class="border border-gray-300 rounded-md p-2 w-full"
              id="employee_signature"
              name="employee_signature"
              placeholder="_________________________"
              type="text"
            />
          </div>
          <div class="flex-1">
            <label class="block font-semibold mb-1" for="employee_signature_date">Date:</label>
            <input
              class="border border-gray-300 rounded-md p-2 w-full"
              id="employee_signature_date"
              name="employee_signature_date"
              type="date"
            />
          </div>
        </div>
      </form>
    </section>
    <!-- Section 3: Reviewer Assessment -->
    <section aria-labelledby="section3" class="mb-14">
      <h2 class="text-3xl font-semibold mb-6 border-b border-gray-300 pb-2" id="section3">
        Section 3: Reviewer Assessment (To be completed by Reporting Manager)
      </h2>
      <p class="mb-2 font-semibold text-indigo-900">Scale: 1 â€“ Needs Improvement | 5 â€“ Exceptional</p>
      <div class="overflow-x-auto rounded-md shadow-sm border border-gray-300 bg-white">
        <table>
          <thead>
            <tr>
              <th class="w-2/5">Competency</th>
              <th class="w-1/6 text-center">Rating</th>
              <th class="w-7/12">Comment/Example</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>Communication &amp; Client Interaction</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Communication &amp; Client Interaction"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="rev_communication"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="rev_communication_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Sales Conversion &amp; Revenue Contribution</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Sales Conversion &amp; Revenue Contribution"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="rev_sales"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="rev_sales_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Product &amp; Process Knowledge</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Product &amp; Process Knowledge"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="rev_product"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="rev_product_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Client Retention &amp; Feedback Management</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Client Retention &amp; Feedback Management"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="rev_client_retention"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="rev_client_retention_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>CRM Usage, Reporting &amp; Follow-ups</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for CRM Usage, Reporting &amp; Follow-ups"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="rev_crm"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="rev_crm_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Time Management, Reliability &amp; Punctuality</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Time Management, Reliability &amp; Punctuality"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="rev_time"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="rev_time_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Initiative &amp; Ownership</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Initiative &amp; Ownership"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="rev_initiative"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="rev_initiative_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Interdepartmental Collaboration</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Interdepartmental Collaboration"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="rev_collaboration"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="rev_collaboration_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td>Handling Escalations</td>
              <td class="text-center align-middle">
                <input
                  aria-label="Rating for Handling Escalations"
                  class="rating-input"
                  max="5"
                  min="1"
                  name="rev_escalations"
                  required
                  type="number"
                />
              </td>
              <td>
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="rev_escalations_comment"
                  rows="2"
                ></textarea>
              </td>
            </tr>
            <tr>
              <td class="font-semibold text-right" colspan="2">Total Score (out of 45):</td>
              <td>
                <input
                  class="border border-gray-300 rounded-md p-2 w-24 text-center"
                  max="45"
                  min="0"
                  name="rev_total_score"
                  placeholder="0"
                  readonly
                  type="number"
                />
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <h3 class="text-xl font-semibold mt-10 mb-4 text-indigo-700">Managerial Observations</h3>
      <form class="max-w-3xl mx-auto space-y-8">
        <div>
          <label class="font-semibold text-indigo-700 block mb-1" for="keyStrengths">1. Key Strengths</label>
          <textarea
            class="border border-gray-300 rounded-md p-2 w-full resize-y"
            id="keyStrengths"
            name="keyStrengths"
            rows="5"
          ></textarea>
        </div>
        <div>
          <label class="font-semibold text-indigo-700 block mb-1" for="areasImprovement">2. Areas of Improvement</label>
          <textarea
            class="border border-gray-300 rounded-md p-2 w-full resize-y"
            id="areasImprovement"
            name="areasImprovement"
            rows="5"
          ></textarea>
        </div>
        <div>
          <label class="font-semibold text-indigo-700 block mb-1" for="trainingNeeds">3. Training &amp; Development Needs</label>
          <textarea
            class="border border-gray-300 rounded-md p-2 w-full resize-y"
            id="trainingNeeds"
            name="trainingNeeds"
            rows="5"
          ></textarea>
        </div>
        <fieldset class="border border-gray-300 rounded-md p-4">
          <legend class="font-semibold text-indigo-700 mb-3">4. Overall Performance Rating</legend>
          <div class="flex flex-wrap gap-6 text-indigo-900 font-semibold">
            <label class="inline-flex items-center cursor-pointer gap-2">
              <input class="form-radio text-indigo-600" name="overallRating" type="radio" value="Exceptional" />
              Exceptional
            </label>
            <label class="inline-flex items-center cursor-pointer gap-2">
              <input class="form-radio text-indigo-600" name="overallRating" type="radio" value="Exceeds Expectations" />
              Exceeds Expectations
            </label>
            <label class="inline-flex items-center cursor-pointer gap-2">
              <input class="form-radio text-indigo-600" name="overallRating" type="radio" value="Meets Expectations" />
              Meets Expectations
            </label>
            <label class="inline-flex items-center cursor-pointer gap-2">
              <input class="form-radio text-indigo-600" name="overallRating" type="radio" value="Needs Improvement" />
              Needs Improvement
            </label>
            <label class="inline-flex items-center cursor-pointer gap-2">
              <input class="form-radio text-indigo-600" name="overallRating" type="radio" value="Unsatisfactory" />
              Unsatisfactory
            </label>
          </div>
        </fieldset>
      </form>
    </section>
    <!-- Section 4: Achievements & Contributions -->
    <section aria-labelledby="section4" class="mb-14">
      <h2 class="text-3xl font-semibold mb-6 border-b border-gray-300 pb-2" id="section4">
        Section 4: Achievements &amp; Contributions
      </h2>
      <div class="overflow-x-auto rounded-md shadow-sm border border-gray-300 bg-white">
        <table>
          <thead>
            <tr class="bg-indigo-600 text-white">
              <th class="p-3 w-1/2">Accomplishment</th>
              <th class="p-3 w-1/3">Impact</th>
              <th class="p-3 w-24">Month</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="achievement_1"
                  type="text"
                />
              </td>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="impact_1"
                  type="text"
                />
              </td>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="month_1"
                  type="text"
                />
              </td>
            </tr>
            <tr>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="achievement_2"
                  type="text"
                />
              </td>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="impact_2"
                  type="text"
                />
              </td>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="month_2"
                  type="text"
                />
              </td>
            </tr>
            <tr>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="achievement_3"
                  type="text"
                />
              </td>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="impact_3"
                  type="text"
                />
              </td>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="month_3"
                  type="text"
                />
              </td>
            </tr>
            <tr>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="achievement_4"
                  type="text"
                />
              </td>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="impact_4"
                  type="text"
                />
              </td>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="month_4"
                  type="text"
                />
              </td>
            </tr>
            <tr>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="achievement_5"
                  type="text"
                />
              </td>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="impact_5"
                  type="text"
                />
              </td>
              <td class="p-2">
                <input
                  autocomplete="off"
                  class="border border-gray-300 rounded-md p-2 w-full"
                  name="month_5"
                  type="text"
                />
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
    <!-- Section 5: Goal Setting for Next Year (Reviewer & Employee Together) -->
    <section aria-labelledby="section5" class="mb-14">
      <h2 class="text-3xl font-semibold mb-6 border-b border-gray-300 pb-2" id="section5">
        Section 5: Goal Setting for Next Year (Reviewer &amp; Employee Together)
      </h2>
      <div
        class="overflow-x-auto rounded-md shadow-sm border border-gray-300 bg-white"
        id="goalsTableWrapper"
      >
        <table class="w-full border-collapse" id="goalsTable">
          <thead>
            <tr class="bg-indigo-600 text-white">
              <th class="p-3 text-left w-24">Goal</th>
              <th class="p-3 text-left">Description &amp; KPI</th>
              <th class="p-3 text-left w-48">Support Required</th>
              <th class="p-3 text-center w-12">Remove</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="p-2 font-semibold">Goal 1</td>
              <td class="p-2">
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="goal1_desc_reviewer"
                  rows="2"
                ></textarea>
              </td>
              <td class="p-2">
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="goal1_support"
                  rows="2"
                ></textarea>
              </td>
              <td class="p-2 text-center">
                <button
                  aria-label="Remove Goal 1"
                  class="text-red-600 hover:text-red-800 opacity-50 cursor-not-allowed"
                  disabled
                  type="button"
                >
                  <i class="fa-solid fa-trash"></i>
                </button>
              </td>
            </tr>
            <tr>
              <td class="p-2 font-semibold">Goal 2</td>
              <td class="p-2">
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="goal2_desc_reviewer"
                  rows="2"
                ></textarea>
              </td>
              <td class="p-2">
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="goal2_support"
                  rows="2"
                ></textarea>
              </td>
              <td class="p-2 text-center">
                <button
                  aria-label="Remove Goal 2"
                  class="text-red-600 hover:text-red-800"
                  type="button"
                >
                  <i class="fa-solid fa-trash"></i>
                </button>
              </td>
            </tr>
            <tr>
              <td class="p-2 font-semibold">Goal 3</td>
              <td class="p-2">
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="goal3_desc_reviewer"
                  rows="2"
                ></textarea>
              </td>
              <td class="p-2">
                <textarea
                  class="border border-gray-300 rounded-md p-2 w-full resize-y"
                  name="goal3_support"
                  rows="2"
                ></textarea>
              </td>
              <td class="p-2 text-center">
                <button
                  aria-label="Remove Goal 3"
                  class="text-red-600 hover:text-red-800"
                  type="button"
                >
                  <i class="fa-solid fa-trash"></i>
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="mt-4 text-right">
        <button
          class="inline-flex items-center gap-2 rounded-md bg-indigo-600 px-4 py-2 text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500"
          id="addGoalBtn"
          type="button"
        >
          <i class="fa-solid fa-plus"></i> Add Goal
        </button>
      </div>
    </section>
    <!-- Section 6: Development Action Plan -->
    <section aria-labelledby="section6" class="mb-14 max-w-3xl mx-auto">
      <h2 class="text-3xl font-semibold mb-6 border-b border-gray-300 pb-2" id="section6">
        Section 6: Development Action Plan
      </h2>
      <form class="space-y-6">
        <div>
          <label class="font-semibold text-indigo-700" for="training_sessions">Training sessions to attend:</label>
          <textarea
            class="border border-gray-300 rounded-md p-2 w-full resize-y"
            id="training_sessions"
            name="training_sessions"
            rows="5"
          ></textarea>
        </div>
        <div>
          <label class="font-semibold text-indigo-700" for="shadowing_plan">Shadowing/mentorship plan:</label>
          <textarea
            class="border border-gray-300 rounded-md p-2 w-full resize-y"
            id="shadowing_plan"
            name="shadowing_plan"
            rows="5"
          ></textarea>
        </div>
        <div>
          <label class="font-semibold text-indigo-700" for="quarterly_checkins">Quarterly check-ins scheduled:</label>
          <textarea
            class="border border-gray-300 rounded-md p-2 w-full resize-y"
            id="quarterly_checkins"
            name="quarterly_checkins"
            rows="2"
          ></textarea>
        </div>
        <div>
          <label class="font-semibold text-indigo-700" for="expected_milestones">Expected milestones:</label>
          <textarea
            class="border border-gray-300 rounded-md p-2 w-full resize-y"
            id="expected_milestones"
            name="expected_milestones"
            rows="5"
          ></textarea>
        </div>
      </form>
    </section>
    <!-- Section 7: Employee Comments -->
    <section aria-labelledby="section7" class="mb-14 max-w-3xl mx-auto">
      <h2 class="text-3xl font-semibold mb-6 border-b border-gray-300 pb-2" id="section7">
        Section 7: Employee Comments
      </h2>
      <form>
        <textarea
          class="border border-gray-300 rounded-md p-3 w-full resize-y"
          name="employee_comments"
          rows="5"
        ></textarea>
      </form>
    </section>
    <!-- Signatures -->
    <section aria-label="Signatures" class="mb-20 max-w-3xl mx-auto">
      <h2 class="text-3xl font-semibold mb-8 border-b border-gray-300 pb-2">Signatures</h2>
      <form>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-10 mb-8">
          <div>
            <label class="block font-semibold mb-1 text-indigo-700" for="employee_sign">Employee:</label>
            <input
              autocomplete="off"
              class="border border-gray-300 rounded-md p-2 w-full"
              id="employee_sign"
              name="employee_sign"
              type="text"
            />
          </div>
          <div>
            <label class="block font-semibold mb-1 text-indigo-700" for="employee_sign_date">Date:</label>
            <input
              class="border border-gray-300 rounded-md p-4 w-full"
              id="employee_sign_date"
              name="employee_sign_date"
              type="date"
            />
          </div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-10 mb-8">
          <div>
            <label class="block font-semibold mb-1 text-indigo-700" for="reviewer_sign">Reviewer:</label>
            <input
              autocomplete="off"
              class="border border-gray-300 rounded-md p-4 w-full"
              id="reviewer_sign"
              name="reviewer_sign"
              type="text"
            />
          </div>
          <div>
            <label class="block font-semibold mb-1 text-indigo-700" for="reviewer_sign_date">Date:</label>
            <input
              class="border border-gray-300 rounded-md p-2 w-full"
              id="reviewer_sign_date"
              name="reviewer_sign_date"
              type="date"
            />
          </div>
        </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-10">
          <div>
            <label class="block font-semibold mb-1 text-indigo-700" for="second_reviewer_sign">2nd Reviewer (if any):</label>
            <input
              autocomplete="off"
              class="border border-gray-300 rounded-md p-2 w-full"
              id="second_reviewer_sign"
              name="second_reviewer_sign"
              type="text"
            />
          </div>
          <div>
            <label class="block font-semibold mb-1 text-indigo-700" for="second_reviewer_sign_date">Date:</label>
            <input
              class="border border-gray-300 rounded-md p-2 w-full"
              id="second_reviewer_sign_date"
              name="second_reviewer_sign_date"
              type="date"
            />
          </div>
        </div>
      </form>
    </section>
  </main>
  <div
    aria-label="Export options"
    class="relative"
    id="exportButtons"
    role="region"
  >
    <button
      aria-label="Export form to PDF"
      class="flex items-center gap-2"
      id="exportPDF"
      title="Export to PDF"
      type="button"
    >
      <i class="fa-solid fa-file-pdf"></i> Export PDF
    </button>
    <button
      aria-label="Export form to PNG"
      class="flex items-center gap-2"
      id="exportPNG"
      title="Export to PNG"
      type="button"
    >
      <i class="fa-solid fa-file-image"></i> Export PNG
    </button>
    <button
      aria-label="Export form to HTML"
      class="flex items-center gap-2"
      id="exportHTML"
      title="Export to HTML"
      type="button"
    >
      <i class="fa-solid fa-code"></i> Export HTML
    </button>
    <div
      aria-busy="true"
      aria-live="assertive"
      class="hidden absolute inset-0 bg-white bg-opacity-80 flex flex-col items-center justify-center z-50 rounded-xl"
      id="loaderOverlay"
      role="alert"
    >
      <svg
        aria-hidden="true"
        class="animate-spin h-12 w-12 text-indigo-600 mb-4"
        fill="none"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <circle
          class="opacity-25"
          cx="12"
          cy="12"
          r="10"
          stroke="currentColor"
          stroke-width="4"
        ></circle>
        <path
          class="opacity-75"
          d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"
          fill="currentColor"
        ></path>
      </svg>
      <p class="text-indigo-700 font-semibold text-lg">Exporting PDF...</p>
    </div>
  </div>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    // Employee data array
    const employees = [
      {
        id: "156839000001272001",
        employeeID: "41",
        firstName: "Ayesha",
        lastName: "Munot",
        email: "ayesha@physique57mumbai.com",
        department: "Marketing",
        designation: "Associate",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Referral",
        dateOfJoining: "2025-04-01",
        reportingManager: "Mitali Kumar 0004",
        photo: "https://contacts.zoho.in/file?ID=60039413821&fs=thumb",
      },
      {
        id: "156839000000862635",
        employeeID: "34",
        firstName: "Krishna",
        lastName: "Shivalkar",
        email: "krishna@physique57mumbai.com",
        department: "Accounts",
        designation: "Accounts Executive",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2025-01-08",
        reportingManager: "Sachin Nalawade 00025",
        photo: "https://contacts.zoho.in/file?ID=60036230568&fs=thumb",
      },
      {
        id: "156839000000862608",
        employeeID: "33",
        firstName: "Saniya",
        lastName: "Makwana",
        email: "saniyamakwana@physique57mumbai.com",
        department: "Sales & Client Servicing",
        designation: "Sales & Client Servicing Associate",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Referral",
        dateOfJoining: "2025-01-08",
        reportingManager: "Jimmeey Gondaa 0006",
        photo: "https://contacts.zoho.in/file?ID=60036230209&fs=thumb",
      },
      {
        id: "156839000000862581",
        employeeID: "32",
        firstName: "Zaheer",
        lastName: "Agarbattiwala",
        email: "zaheer@physique57mumbai.com",
        department: "Sales & Client Servicing",
        designation: "Sales & Client Servicing Associate",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2025-01-08",
        reportingManager: "Jimmeey Gondaa 0006",
        photo: "https://contacts.zoho.in/file?ID=60036230440&fs=thumb",
      },
      {
        id: "156839000000852029",
        employeeID: "31",
        firstName: "Nunu",
        lastName: "Yeptomi",
        email: "nunu@physique57bengaluru.com",
        department: "Customer Service",
        designation: "CSA",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Referral",
        dateOfJoining: "2025-01-02",
        reportingManager: "Shifa Ali 0011",
        photo: "https://contacts.zoho.in/file?ID=60036018690&fs=thumb",
      },
      {
        id: "156839000000749029",
        employeeID: "30",
        firstName: "Aneesha",
        lastName: "Chopra",
        email: "aneesha@physique57india.com",
        department: "",
        designation: "",
        employmentType: "",
        employeeStatus: "Inactive",
        sourceOfHire: "",
        dateOfJoining: "",
        reportingManager: "",
        photo:
          "https://static.zohocdn.com/zohopeople/people2/images/userg_inactive.1610d5086ab01932bcab3b0903b1edc6.png",
      },
      {
        id: "156839000000604001",
        employeeID: "25",
        firstName: "Sachin",
        lastName: "Nalawade",
        email: "sachin@physique57mumbai.com",
        department: "Accounts",
        designation: "Accounts Assistant",
        employmentType: "",
        employeeStatus: "Active",
        sourceOfHire: "",
        dateOfJoining: "",
        reportingManager: "",
        photo: "https://contacts.zoho.in/file?ID=60032448896&fs=thumb",
      },
      {
        id: "156839000000461205",
        employeeID: "5",
        firstName: "Saachi",
        lastName: "Shetty",
        email: "saachi@physique57india.com",
        department: "Operations",
        designation: "Senior Operations Manager",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2021-01-04",
        reportingManager: "Mitali Kumar 0004",
        photo: "https://contacts.zoho.in/file?ID=60030691613&fs=thumb",
      },
      {
        id: "156839000000372431",
        employeeID: "19",
        firstName: "Taahira",
        lastName: "Sayyed",
        email: "tahira@physique57mumbai.com",
        department: "Sales & Client Servicing",
        designation: "Sales & Client Servicing Associate",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Recruitment Partner",
        dateOfJoining: "2024-02-09",
        reportingManager: "Jimmeey Gondaa 0006",
        photo: "https://contacts.zoho.in/file?ID=60032926659&fs=thumb",
      },
      {
        id: "156839000000357465",
        employeeID: "17",
        firstName: "Manisha",
        lastName: "Khuman",
        email: "manisha@physique57mumbai.com",
        department: "Sales & Client Servicing",
        designation: "Sales & Client Servicing Associate",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Recruitment Partner",
        dateOfJoining: "2024-02-06",
        reportingManager: "Jimmeey Gondaa 0006",
        photo: "https://contacts.zoho.in/file?ID=5438373000000020012",
      },
      {
        id: "156839000000337452",
        employeeID: "16",
        firstName: "Wungsingla",
        lastName: "Serou",
        email: "api@physique57bengaluru.com",
        department: "Customer Service",
        designation: "CSA",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Recruitment Partner",
        dateOfJoining: "2023-12-15",
        reportingManager: "Shifa Ali 0011",
        photo: "https://contacts.zoho.in/file?ID=5438373000000008002",
      },
      {
        id: "156839000000337230",
        employeeID: "25",
        firstName: "Prathap",
        lastName: "K P",
        email: "prathap@physique57bengaluru.com",
        department: "Customer Service",
        designation: "CSA",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Recruitment Partner",
        dateOfJoining: "2024-07-23",
        reportingManager: "Shifa Ali 0011",
        photo: "https://contacts.zoho.in/file?ID=5438373000000005005",
      },
      {
        id: "156839000000337199",
        employeeID: "24",
        firstName: "Sheetal",
        lastName: "Kataria",
        email: "sheetal@physique57mumbai.com",
        department: "Sales & Client Servicing",
        designation: "Sales & Client Servicing Associate",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Recruitment Partner",
        dateOfJoining: "2024-06-18",
        reportingManager: "Jimmeey Gondaa 0006",
        photo: "https://contacts.zoho.in/file?ID=5438373000000007004",
      },
      {
        id: "156839000000337168",
        employeeID: "23",
        firstName: "Imran",
        lastName: "Shaikh",
        email: "imran@physique57mumbai.com",
        department: "Sales & Client Servicing",
        designation: "Sr. Sales & Client Servicing Associate",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Recruitment Partner",
        dateOfJoining: "2024-04-15",
        reportingManager: "Jimmeey Gondaa 0006",
        photo: "https://contacts.zoho.in/file?ID=5438373000000007001",
      },
      {
        id: "156839000000337137",
        employeeID: "22",
        firstName: "Sagar",
        lastName: "Ingole",
        email: "accounts@physique57mumbai.com",
        department: "Admin",
        designation: "Associate",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2024-03-13",
        reportingManager: "Zahur Shaikh 0003",
        photo: "https://contacts.zoho.in/file?ID=60032448293&fs=thumb",
      },
      {
        id: "156839000000337106",
        employeeID: "21",
        firstName: "Vivaran",
        lastName: "Dhasmana",
        email: "vivaran@physique57mumbai.com",
        department: "Training",
        designation: "Trainer",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2024-03-01",
        reportingManager: "Anisha Shah 0001",
        photo: "https://contacts.zoho.in/file?ID=60033247035&fs=thumb",
      },
      {
        id: "156839000000337007",
        employeeID: "18",
        firstName: "Shipra",
        lastName: "Pinge",
        email: "shipra@physique57mumbai.com",
        department: "Sales & Client Servicing",
        designation: "Sales & Client Servicing Associate",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Recruitment Partner",
        dateOfJoining: "2024-02-08",
        reportingManager: "Jimmeey Gondaa 0006",
        photo: "https://contacts.zoho.in/file?ID=60032925335&fs=thumb",
      },
      {
        id: "156839000000336972",
        employeeID: "15",
        firstName: "Nisha",
        lastName: "Gupta",
        email: "nisha@physique57bengaluru.com",
        department: "Accounts",
        designation: "Accounts Assistant",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2023-12-11",
        reportingManager: "Sachin Nalawade 00025",
        photo: "https://contacts.zoho.in/file?ID=60032448375&fs=thumb",
      },
      {
        id: "156839000000336939",
        employeeID: "14",
        firstName: "Gaurav",
        lastName: "Sogam",
        email: "gaurav@physique57mumbai.com",
        department: "Accounts",
        designation: "Accounts Assistant",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2023-12-11",
        reportingManager: "Sachin Nalawade 00025",
        photo: "https://contacts.zoho.in/file?ID=60033032072&fs=thumb",
      },
      {
        id: "156839000000336884",
        employeeID: "12",
        firstName: "Pushyank",
        lastName: "Nahar",
        email: "pushyank@physique57bengaluru.com",
        department: "Training",
        designation: "Trainer",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2023-08-01",
        reportingManager: "Anisha Shah 0001",
        photo: "https://contacts.zoho.in/file?ID=60032470884&fs=thumb",
      },
      {
        id: "156839000000336851",
        employeeID: "11",
        firstName: "Shifa",
        lastName: "Ali",
        email: "shifa@physique57bengaluru.com",
        department: "Management",
        designation: "Regional Operations Head - South",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2023-06-15",
        reportingManager: "Mitali Kumar 0004",
        photo: "https://contacts.zoho.in/file?ID=60029920020&fs=thumb",
      },
      {
        id: "156839000000336818",
        employeeID: "10",
        firstName: "Akshay",
        lastName: "Rane",
        email: "akshay@physique57mumbai.com",
        department: "Sales & Client Servicing",
        designation: "Sales & Client Servicing Associate",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2023-05-02",
        reportingManager: "Jimmeey Gondaa 0006",
        photo: "https://contacts.zoho.in/file?ID=60032926004&fs=thumb",
      },
      {
        id: "156839000000336752",
        employeeID: "8",
        firstName: "Mrigakshi",
        lastName: "Jaiswal",
        email: "mrigakshi@physique57mumbai.com",
        department: "Training",
        designation: "Trainer",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2022-09-20",
        reportingManager: "Anisha Shah 0001",
        photo: "https://contacts.zoho.in/file?ID=60033247336&fs=thumb",
      },
      {
        id: "156839000000336686",
        employeeID: "6",
        firstName: "Jimmeey",
        lastName: "Gondaa",
        email: "jimmeey@physique57india.com",
        department: "Sales & Client Servicing",
        designation: "Head - Sales & Client Services",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2022-06-20",
        reportingManager: "Mitali Kumar 0004",
        photo: "https://contacts.zoho.in/file?ID=60030221873&fs=thumb",
      },
      {
        id: "156839000000336598",
        employeeID: "3",
        firstName: "Zahur",
        lastName: "Shaikh",
        email: "zahur@physique57mumbai.com",
        department: "Operations",
        designation: "Studio Coordinator",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2019-11-07",
        reportingManager: "Saachi Shetty 0005",
        photo: "https://contacts.zoho.in/file?ID=5438373000000023001",
      },
      {
        id: "156839000000336565",
        employeeID: "2",
        firstName: "Saniya",
        lastName: "Jaiswal",
        email: "saniya@physique57mumbai.com",
        department: "Training",
        designation: "Trainer",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2017-11-06",
        reportingManager: "Anisha Shah 0001",
        photo: "https://contacts.zoho.in/file?ID=60033008827&fs=thumb",
      },
      {
        id: "156839000000336532",
        employeeID: "1",
        firstName: "Anisha",
        lastName: "Shah",
        email: "anisha@physique57india.com",
        department: "Training",
        designation: "Master Trainer",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2017-11-06",
        reportingManager: "",
        photo: "https://contacts.zoho.in/file?ID=60032792322&fs=thumb",
      },
      {
        id: "156839000000251001",
        employeeID: "4",
        firstName: "Mitali",
        lastName: "Kumar",
        email: "mitali@physique57india.com",
        department: "Management",
        designation: "Chief Operating Officer",
        employmentType: "Permanent",
        employeeStatus: "Active",
        sourceOfHire: "Direct",
        dateOfJoining: "2020-09-15",
        reportingManager: "",
        photo: "https://contacts.zoho.in/file?ID=60025529812&fs=thumb",
      },
    ];

    // Populate employee dropdown
    const employeeSelect = document.getElementById("employeeName");
    employees.forEach((emp) => {
      const option = document.createElement("option");
      option.value = emp.id;
      option.textContent = `${emp.firstName} ${emp.lastName}`;
      employeeSelect.appendChild(option);
    });

    // Elements to populate
    const fieldsToPopulate = [
      "designation",
      "department",
      "employeeID",
      "email",
      "employmentType",
      "employeeStatus",
      "sourceOfHire",
      "dateOfJoining",
      "reportingManager",
    ];

    const employeePhoto = document.getElementById("employeePhoto");

    employeeSelect.addEventListener("change", (e) => {
      const selectedId = e.target.value;
      const emp = employees.find((emp) => emp.id === selectedId);
      if (emp) {
        fieldsToPopulate.forEach((field) => {
          const el = document.getElementById(field);
          if (el) {
            if (field === "dateOfJoining" && emp[field]) {
              el.value = emp[field];
            } else {
              el.value = emp[field] || "";
            }
          }
        });
        if (emp.photo && emp.photo.startsWith("http")) {
          employeePhoto.src = emp.photo;
          employeePhoto.alt = `Photo of ${emp.firstName} ${emp.lastName}`;
        } else {
          employeePhoto.src = "https://placehold.co/80x80/png?text=No+Photo";
          employeePhoto.alt = "No photo available";
        }
      } else {
        // Clear fields if no employee selected
        fieldsToPopulate.forEach((field) => {
          const el = document.getElementById(field);
          if (el) el.value = "";
        });
        employeePhoto.src = "https://placehold.co/80x80/png?text=Photo";
        employeePhoto.alt = "Employee photo placeholder";
      }
    });

    // Calculate total scores for self-assessment and manager assessment
    function calculateTotalScore(prefix) {
      let total = 0;
      const keys = [
        "communication",
        "sales",
        "product",
        "client_rel",
        "crm",
        "time",
        "problem",
        "initiative",
        "collaboration",
      ];
      for (let i = 0; i < keys.length; i++) {
        const input = document.querySelector(`input[name="${prefix}_${keys[i]}"]`);
        if (input) {
          let val = parseInt(input.value);
          if (!isNaN(val)) {
            if (val > 5) {
              val = 5;
              input.value = 5;
            } else if (val < 1) {
              val = 1;
              input.value = 1;
            }
            total += val;
          }
        }
      }
      return total;
    }

    const selfInputs = document.querySelectorAll('input[name^="self_"]');
    const selfTotalScoreInput = document.querySelector('input[name="self_total_score"]');

    function updateSelfTotalScore() {
      const total = calculateTotalScore("self");
      selfTotalScoreInput.value = total;
    }

    selfInputs.forEach((input) => {
      input.addEventListener("input", () => {
        let val = parseInt(input.value);
        if (isNaN(val) || val < 1) {
          input.value = "";
        } else if (val > 5) {
          input.value = 5;
        }
        updateSelfTotalScore();
      });
    });

    const revInputs = document.querySelectorAll('input[name^="rev_"]');
    const revTotalScoreInput = document.querySelector('input[name="rev_total_score"]');

    function updateRevTotalScore() {
      let total = 0;
      revInputs.forEach((input) => {
        let val = parseInt(input.value);
        if (!isNaN(val)) {
          if (val > 5) {
            val = 5;
            input.value = 5;
          } else if (val < 1) {
            val = 1;
            input.value = 1;
          }
          total += val;
        }
      });
      revTotalScoreInput.value = total;
    }

    revInputs.forEach((input) => {
      input.addEventListener("input", () => {
        updateRevTotalScore();
      });
    });

    // Export functionality with loader and multi-page PDF support
    const exportPDFBtn = document.getElementById("exportPDF");
    const exportPNGBtn = document.getElementById("exportPNG");
    const exportHTMLBtn = document.getElementById("exportHTML");
    const exportContent = document.getElementById("exportContent");
    const loaderOverlay = document.getElementById("loaderOverlay");

    function showLoader() {
      loaderOverlay.classList.remove("hidden");
    }
    function hideLoader() {
      loaderOverlay.classList.add("hidden");
    }

    exportPDFBtn.addEventListener("click", async () => {
      showLoader();
      try {
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF({
          unit: "pt",
          format: "a4",
          compress: true,
        });
        const pageWidth = pdf.internal.pageSize.getWidth();
        const pageHeight = pdf.internal.pageSize.getHeight();
        const margin = 30;

        // Temporarily increase scale for better quality
        const canvas = await html2canvas(exportContent, {
          scale: 3,
          useCORS: true,
          scrollY: -window.scrollY,
          windowWidth: document.documentElement.scrollWidth,
          windowHeight: document.documentElement.scrollHeight,
        });

        const imgData = canvas.toDataURL("image/png");
        const imgProps = pdf.getImageProperties(imgData);
        const pdfWidth = pageWidth - margin * 2;
        const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;

        if (pdfHeight < pageHeight - margin * 2) {
          // Fits on one page
          pdf.addImage(imgData, "PNG", margin, margin, pdfWidth, pdfHeight);
        } else {
          // Multi-page
          let heightLeft = pdfHeight;
          let position = 0;
          const pageCanvasHeight = (canvas.height * (pageHeight - margin * 2)) / pdfHeight;
          const pageCanvasWidth = canvas.width;

          let pageCount = Math.ceil(pdfHeight / (pageHeight - margin * 2));
          for (let i = 0; i < pageCount; i++) {
            const pageCanvas = document.createElement("canvas");
            pageCanvas.width = pageCanvasWidth;
            pageCanvas.height = pageCanvasHeight;
            const ctx = pageCanvas.getContext("2d");
            ctx.drawImage(
              canvas,
              0,
              i * pageCanvasHeight,
              pageCanvasWidth,
              pageCanvasHeight,
              0,
              0,
              pageCanvasWidth,
              pageCanvasHeight
            );
            const pageData = pageCanvas.toDataURL("image/png");
            if (i > 0) pdf.addPage();
            pdf.addImage(pageData, "PNG", margin, margin, pdfWidth, pageHeight - margin * 2);
          }
        }
        pdf.save("performance-appraisal.pdf");
      } catch (error) {
        alert("An error occurred while exporting PDF. Please try again.");
        console.error(error);
      } finally {
        hideLoader();
      }
    });

    exportPNGBtn.addEventListener("click", async () => {
      showLoader();
      try {
        const canvas = await html2canvas(exportContent, { scale: 3, useCORS: true });
        canvas.toBlob((blob) => {
          const url = URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = "performance-appraisal.png";
          a.click();
          URL.revokeObjectURL(url);
          hideLoader();
        });
      } catch (error) {
        alert("An error occurred while exporting PNG. Please try again.");
        console.error(error);
        hideLoader();
      }
    });

    exportHTMLBtn.addEventListener("click", () => {
      try {
        const htmlContent = exportContent.outerHTML;
        const blob = new Blob([htmlContent], { type: "text/html" });
        const url = URL.createObjectURL(blob);
        const a = document.createElement("a");
        a.href = url;
        a.download = "performance-appraisal.html";
        a.click();
        URL.revokeObjectURL(url);
      } catch (error) {
        alert("An error occurred while exporting HTML. Please try again.");
        console.error(error);
      }
    });

    // Goal table management
    const goalsTable = document.getElementById("goalsTable");
    const addGoalBtn = document.getElementById("addGoalBtn");

    function updateGoalLabels() {
      const rows = goalsTable.querySelectorAll("tbody tr");
      rows.forEach((row, index) => {
        const goalCell = row.querySelector("td:first-child");
        goalCell.textContent = `Goal ${index + 1}`;
        const removeBtn = row.querySelector("button");
        if (index === 0) {
          removeBtn.disabled = true;
          removeBtn.classList.add("opacity-50", "cursor-not-allowed");
        } else {
          removeBtn.disabled = false;
          removeBtn.classList.remove("opacity-50", "cursor-not-allowed");
        }
      });
    }

    addGoalBtn.addEventListener("click", () => {
      const rowCount = goalsTable.querySelectorAll("tbody tr").length;
      const newRow = document.createElement("tr");

      newRow.innerHTML = `
        <td class="p-2 font-semibold">Goal ${rowCount + 1}</td>
        <td class="p-2">
          <textarea
            class="border border-gray-300 rounded-md p-2 w-full resize-y"
            name="goal${rowCount + 1}_desc_reviewer"
            rows="2"
          ></textarea>
        </td>
        <td class="p-2">
          <textarea
            class="border border-gray-300 rounded-md p-2 w-full resize-y"
            name="goal${rowCount + 1}_support"
            rows="2"
          ></textarea>
        </td>
        <td class="p-2 text-center">
          <button
            type="button"
            class="text-red-600 hover:text-red-800"
            aria-label="Remove Goal ${rowCount + 1}"
          >
            <i class="fa-solid fa-trash"></i>
          </button>
        </td>
      `;

      goalsTable.querySelector("tbody").appendChild(newRow);
      updateGoalLabels();

      // Attach remove event
      const removeBtn = newRow.querySelector("button");
      removeBtn.addEventListener("click", () => {
        newRow.remove();
        updateGoalLabels();
      });
    });

    // Attach remove event to existing remove buttons
    goalsTable.querySelectorAll("tbody button").forEach((btn) => {
      btn.addEventListener("click", (e) => {
        const row = e.target.closest("tr");
        if (row) {
          row.remove();
          updateGoalLabels();
        }
      });
    });

    // Initialize labels on load
    updateGoalLabels();

    // Reset form button clears all fields and resets photo
    const resetFormBtn = document.getElementById("resetFormBtn");
    resetFormBtn.addEventListener("click", () => {
      setTimeout(() => {
        fieldsToPopulate.forEach((field) => {
          const el = document.getElementById(field);
          if (el) el.value = "";
        });
        employeePhoto.src = "https://placehold.co/80x80/png?text=Photo";
        employeePhoto.alt = "Employee photo placeholder";
        selfTotalScoreInput.value = "";
        revTotalScoreInput.value = "";
        employeeSelect.value = "";
      }, 0);
    });
  </script>
</body>
</html>
